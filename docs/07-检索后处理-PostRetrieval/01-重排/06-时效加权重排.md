### 總覽
TimeWeightedVectorStoreRetriever 將時間新鮮度納入排序：在語義相似度之外引入時間衰減（或加權）因子，讓最近訪問/新增的文檔獲得更高權重，適合新聞/動態知識庫等時效場景。

### 流程圖
```mermaid
flowchart TD
  D1[doc1: 昨日訪問] & D2[doc2: 當前時間] --> VS[FAISS 向量庫]
  Q[Query] --> TWR[TimeWeightedVectorStoreRetriever(decay_rate,k)]
  VS --> TWR --> R[排序結果]
```
 
### 分步講解
- 嵌入/索引：`OpenAIEmbeddings(1536)` + `faiss.IndexFlatL2` 組成本地向量庫。
- 加權檢索：配置 `decay_rate=0.5, k=1`，通過 `metadata.last_accessed_at` 計算時間因子。
- 模擬：使用 `mock_now` 模擬未來時間，觀察排序受時效影響的變化。

### 關鍵點總結
- **時效感知**：兼顧相關性與新鮮度。
- **可調參**：`decay_rate` 調整時間影響強度；`k` 控制返回數量。
- **實務注意**：確保正確寫入 `last_accessed_at`；定期更新訪問時間。


